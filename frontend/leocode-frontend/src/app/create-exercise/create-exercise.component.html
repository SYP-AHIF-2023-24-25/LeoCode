<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <a class="navbar-brand" href="#">LeoCode</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav">
      <li class="nav-item">
        
      </li>
    </ul>
  </div>
</nav>

<div class="container-fluid">
  <div class="row">
    <div class="col-md-2 d-none d-md-block bg-light sidebar">
      <div class="sidebar-sticky">
        <ul class="nav flex-column">

          <li class="nav-item">
            <a class="nav-link main-menu-link" >1. Vintage</a>
            <ul class="sub-menu">
              <li><a [routerLink]="['/introdcution']">Overview</a></li>
              <li><a [routerLink]="['/introdcution']">Csharp</a></li>
            </ul>
          </li>

          <li class="nav-item">
            <a class="nav-link main-menu-link" >2. Vintage</a>
            <ul class="sub-menu">
              <li><a [routerLink]="['/introdcution']">Overview</a></li>
              <li><a [routerLink]="['/introdcution']">Csharp</a></li>
              <li><a [routerLink]="['/introdcution']">Typescript</a></li>
            </ul>
          </li>

          <li class="nav-item">
            <a class="nav-link main-menu-link" >3. Vintage</a>
            <ul class="sub-menu">
              <li><a [routerLink]="['/introdcution']">Overview</a></li>
              <li><a [routerLink]="['/introdcution']">Java</a></li>
              <li><a [routerLink]="['/introdcution']">Typescript</a></li>
            </ul>
          </li>

          <li class="nav-item">
            <a class="nav-link main-menu-link" >4. Vintage</a>
            <ul class="sub-menu">
              <li><a [routerLink]="['/introdcution']">Overview</a></li>
              <li><a [routerLink]="['/introdcution']">Csharp</a></li>
              <li><a [routerLink]="['/introdcution']">Typescript</a></li>
            </ul>
          </li>

          <li class="nav-item">
            <a class="nav-link main-menu-link" >5. Vintage</a>
            <ul class="sub-menu">
              <li><a [routerLink]="['/introdcution']">Overview</a></li>
              <li><a [routerLink]="['/introdcution']">Java</a></li>
              <li><a [routerLink]="['/introdcution']">Typescript</a></li>
              <li><a [routerLink]="['/introdcution']">Csharp</a></li>
            </ul>
        </ul>
      </div>
    </div>


    <div class="col-md-10">
      <div class="container mt-4">
        <!-- Schritte als Rechtecke -->
        <div class="row justify-content-center">
          <div class="col-md-8">
            <div class="step-indicator">
              <div *ngFor="let step of [1, 2, 3, 4, 5]" 
                   class="step-indicator-item" 
                   [ngClass]="{ 'current-step': currentStep === step }"
                   (click)="goToStep(step)">
                {{ 'Step ' + step }}
              </div>
            </div>
          </div>
        </div>


        <div class="container">
          <!-- Schritt 1: Anleitung hinzufügen -->
          <div *ngIf="currentStep === 1">
            <div class="row justify-content-center">
              <div class="col-md-12">
                <div class="card mt-5">
                  <div class="card-body">
                    <h2 class="card-title">Step 1: Add Introduction</h2>
                    <div class="form-group">
                      <textarea class="form-control" rows="5" style="height: 300px; width: 1000px"  [(ngModel)]="instruction" placeholder="Geben Sie hier Ihre Anleitung ein"></textarea>
                    </div>
                    <button class="btn btn-primary" (click)="nextStep()">Next</button>
                  </div>
                </div>
              </div>
            </div>
          </div>


          <!-- Schritt 2: Sprache auswählen -->
          <div *ngIf="currentStep === 2">
            <div class="row justify-content-center">
              <div class="col-md-12">
                <div class="card mt-5">
                  <div class="card-body" style="height: 300px; width: 1000px">
                    <h2 class="card-title">Step 2: Chose Language</h2>
                    <div class="form-group">
                      <select class="form-control"  [(ngModel)]="selectedLanguage">
                        <option value="TypeScript">TypeScript</option>
                        <option value="Csharp">Csharp</option>
                        <option value="Java">Java</option>
                      </select>
                    </div>
                    <button class="btn btn-primary" (click)="nextStep()">Next</button>
                  </div>
                </div>
              </div>
            </div>
          </div>


          <!-- Schritt 3: Tags auswählen -->
    <div *ngIf="currentStep === 3">
      <div class="row justify-content-center">
        <div class="col-md-12">
          <div class="card mt-5">
            <div class="card-body" style="height: 500px; width: 1000px">
              <h2 class="card-title">Step 3: Chose Tags</h2>
              <!-- Ausgewählte Tags anzeigen -->
              <div class="selected-tags d-flex flex-wrap">
                <p>Chosen tags:</p>
                <div *ngFor="let selectedTag of selectedTags" class="selected-tag mr-2 mb-2">
                  <span class="badge badge-primary">{{ selectedTag }}</span>
                </div>
              </div>
              <!-- Verfügbare Tags anzeigen -->
              <div class="available-tags">
                <div *ngFor="let tag of availableTags" class="form-check">
                  <input class="form-check-input" type="checkbox" [value]="tag" (change)="toggleTagSelection(tag)">
                  <label class="form-check-label">
                    {{ tag }}
                  </label>
                </div>
              </div>
              <button class="btn btn-primary" (click)="nextStep()">Next</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    




    <!-- Schritt 4: ZIP-Datei hochladen -->
    <div *ngIf="currentStep === 4">
      <div class="row justify-content-center">
        <div class="col-md-12">
        <div class="card mt-5">
          <div class="card-body" style="height: 300px; width: 1000px">
            <h2 class="card-title">Step 4: Upload Template as ZIP</h2>
            <input type="file" (change)="zipFilesUpload($event)" class="form-control-file mt-3">
          </div>
          <button class="btn btn-primary" (click)="nextStep()">Next</button>
        </div>
        </div>
      </div>
    </div>

    
     <!-- Schritt 5: Senden an Backend -->
<div *ngIf="currentStep === 5" class="row justify-content-center align-items-center">
  <div class="col-md-12">
    <div class="card mt-5">
      <div class="card-body"style="height: 300px; width: 1000px">
        <h2 class="card-title">Overview</h2>
        <p><strong>Anleitung:</strong> {{ instruction }}</p>
        <p><strong>Sprache:</strong> {{ selectedLanguage }}</p>
        <p><strong>Ausgewählte Tags:</strong> {{ selectedTags.join(', ') }}</p>
        <p><strong>ZIP-Datei:</strong> {{ zipFile?.name }}</p>
        <button class="btn btn-primary" (click)="sendCodeToBackend()">Upload Exercise</button>
      </div>
    </div>
  </div>
</div>

<br>
<br>
<br>


<!-- Suchleiste für Tags -->
<div class="form-group mt-4">
  <input type="text" class="form-control" placeholder="Tags filtern..." [(ngModel)]="searchTag">
</div>

<!-- Tabelle mit gefilterten Übungen -->
<table class="table">
  <thead>
    <tr>
      <th>Introduction</th>
      <th>Tags</th>
      <th>Testrun</th>
    </tr>
  </thead>
  <tbody>
    <ng-container *ngIf="exercises.length > 0">
      <ng-container *ngFor="let exercise of filteredExercises">
        <tr>
          <td>{{ exercise.instruction }}</td>
          <td>{{ exercise.tags }}</td>
          <td>
            <button class="btn btn-primary" (click)="runTest(exercise)">Run Test</button>
          </td>
        </tr>
      </ng-container>
    </ng-container>
    <tr *ngIf="exercises.length === 0">
      <td colspan="3">No exercises found</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</div>